(()=>{"use strict";var e,a={146:(e,a,o)=>{var l={};o.r(l),o.d(l,{name:()=>x,settings:()=>u});var t={};o.r(t),o.d(t,{name:()=>_,settings:()=>C});var s={};o.r(s),o.d(s,{name:()=>j,settings:()=>z});var i={};o.r(i),o.d(i,{name:()=>S,settings:()=>$});var r={};o.r(r),o.d(r,{name:()=>B,settings:()=>R});var n={};o.r(n),o.d(n,{name:()=>P,settings:()=>N});const d=window.wp.blocks,b=window.wp.i18n,c=window.wp.blockEditor,h=window.wp.components,k=window.wp.element,p=window.ReactJSXRuntime,x="kashiwazaki-seo-blocks/heading-bar",u={title:(0,b.__)("見出しバー","kashiwazaki-seo-blocks"),description:(0,b.__)("カスタマイズ可能な見出しバー","kashiwazaki-seo-blocks"),category:"kashiwazaki-seo-blocks",icon:"heading",supports:{html:!1},attributes:{content:{type:"string",source:"html",selector:"h1,h2,h3,h4,h5,h6",default:""},level:{type:"number",default:2},backgroundColor:{type:"string",default:""},textColor:{type:"string",default:""},borderColor:{type:"string",default:""},borderWidth:{type:"number",default:2},borderRadius:{type:"number",default:0},padding:{type:"number",default:15},margin:{type:"number",default:0},hasShadow:{type:"boolean",default:!1},shadowColor:{type:"string",default:"rgba(0,0,0,0.3)"}},edit:({attributes:e,setAttributes:a})=>{const{content:o,level:l,backgroundColor:t,textColor:s,borderColor:i,borderWidth:r,borderRadius:n,padding:d,margin:k,hasShadow:x,shadowColor:u}=e,g="h"+l,m=(0,c.useBlockProps)({className:"ksb-heading-bar",style:{backgroundColor:t||void 0,color:s||void 0,borderColor:i||void 0,borderWidth:r?`${r}px`:void 0,borderStyle:i?"solid":void 0,borderRadius:n?`${n}px`:void 0,padding:d?`${d}px`:void 0,margin:k?`${k}px 0`:void 0,boxShadow:x?`0 2px 5px ${u}`:void 0}});return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(c.InspectorControls,{children:[(0,p.jsx)(h.PanelBody,{title:(0,b.__)("基本設定","kashiwazaki-seo-blocks"),children:(0,p.jsx)(h.SelectControl,{label:(0,b.__)("見出しレベル","kashiwazaki-seo-blocks"),value:l,options:[{label:"H1",value:1},{label:"H2",value:2},{label:"H3",value:3},{label:"H4",value:4},{label:"H5",value:5},{label:"H6",value:6}],onChange:e=>a({level:parseInt(e)})})}),(0,p.jsx)(c.PanelColorSettings,{title:(0,b.__)("カラー設定","kashiwazaki-seo-blocks"),colorSettings:[{value:t,onChange:e=>a({backgroundColor:e}),label:(0,b.__)("背景色","kashiwazaki-seo-blocks")},{value:s,onChange:e=>a({textColor:e}),label:(0,b.__)("文字色","kashiwazaki-seo-blocks")},{value:i,onChange:e=>a({borderColor:e}),label:(0,b.__)("枠線色","kashiwazaki-seo-blocks")}]}),(0,p.jsxs)(h.PanelBody,{title:(0,b.__)("スペーシング","kashiwazaki-seo-blocks"),children:[(0,p.jsx)(h.RangeControl,{label:(0,b.__)("内側余白 (px)","kashiwazaki-seo-blocks"),value:d,onChange:e=>a({padding:e}),min:0,max:50}),(0,p.jsx)(h.RangeControl,{label:(0,b.__)("外側余白 (px)","kashiwazaki-seo-blocks"),value:k,onChange:e=>a({margin:e}),min:0,max:50})]}),(0,p.jsxs)(h.PanelBody,{title:(0,b.__)("枠線設定","kashiwazaki-seo-blocks"),children:[(0,p.jsx)(h.RangeControl,{label:(0,b.__)("枠線の太さ (px)","kashiwazaki-seo-blocks"),value:r,onChange:e=>a({borderWidth:e}),min:0,max:10}),(0,p.jsx)(h.RangeControl,{label:(0,b.__)("角の丸み (px)","kashiwazaki-seo-blocks"),value:n,onChange:e=>a({borderRadius:e}),min:0,max:50})]}),(0,p.jsx)(h.PanelBody,{title:(0,b.__)("影の設定","kashiwazaki-seo-blocks"),children:(0,p.jsx)(h.ToggleControl,{label:(0,b.__)("影を付ける","kashiwazaki-seo-blocks"),checked:x,onChange:e=>a({hasShadow:e})})})]}),(0,p.jsx)(c.RichText,{...m,tagName:g,value:o,onChange:e=>a({content:e}),placeholder:(0,b.__)("見出しを入力...","kashiwazaki-seo-blocks")})]})},save:({attributes:e})=>{const{content:a,level:o,backgroundColor:l,textColor:t,borderColor:s,borderWidth:i,borderRadius:r,padding:n,margin:d,hasShadow:b,shadowColor:h}=e,k="h"+o,x=c.useBlockProps.save({className:"ksb-heading-bar",style:{backgroundColor:l||void 0,color:t||void 0,borderColor:s||void 0,borderWidth:i?`${i}px`:void 0,borderStyle:s?"solid":void 0,borderRadius:r?`${r}px`:void 0,padding:n?`${n}px`:void 0,margin:d?`${d}px 0`:void 0,boxShadow:b?`0 2px 5px ${h}`:void 0}});return(0,p.jsx)(c.RichText.Content,{...x,tagName:k,value:a})}},g="ksb_button_presets",m=()=>{try{const e=window.ksbData?.buttonPresets||[],a=localStorage.getItem(g),o=a?JSON.parse(a):[];return e.length>0?(localStorage.setItem(g,JSON.stringify(e)),e):o}catch(e){return[]}},v=e=>{try{if(localStorage.setItem(g,JSON.stringify(e)),window.ksbData?.ajaxUrl&&window.ksbData?.nonce){const a=new FormData;a.append("action","ksb_save_button_presets"),a.append("nonce",window.ksbData.nonce),a.append("presets",JSON.stringify(e)),fetch(window.ksbData.ajaxUrl,{method:"POST",body:a,credentials:"same-origin"}).catch(e=>console.error("Failed to sync button presets to server:",e))}}catch(e){console.error("Failed to save button presets:",e)}},_="kashiwazaki-seo-blocks/button",C={title:(0,b.__)("ボタン","kashiwazaki-seo-blocks"),description:(0,b.__)("カスタマイズ可能なボタン","kashiwazaki-seo-blocks"),category:"kashiwazaki-seo-blocks",icon:"button",supports:{html:!1,align:["left","center","right"]},attributes:{text:{type:"string",source:"html",selector:".ksb-button-text",default:""},url:{type:"string",default:""},backgroundColor:{type:"string",default:"#007cba"},textColor:{type:"string",default:"#ffffff"},borderColor:{type:"string",default:""},borderWidth:{type:"number",default:2},borderRadius:{type:"number",default:5},paddingVertical:{type:"number",default:12},paddingHorizontal:{type:"number",default:24},fontSize:{type:"number",default:16},hasShadow:{type:"boolean",default:!1},shadowColor:{type:"string",default:"rgba(0,0,0,0.3)"},openInNewTab:{type:"boolean",default:!1},buttonWidth:{type:"string",default:"auto"}},edit:({attributes:e,setAttributes:a})=>{const{text:o,url:l,backgroundColor:t,textColor:s,borderColor:i,borderWidth:r,borderRadius:n,paddingVertical:d,paddingHorizontal:x,fontSize:u,hasShadow:g,shadowColor:_,openInNewTab:C,buttonWidth:w}=e,[y,f]=(0,k.useState)(m),[j,z]=(0,k.useState)(!1),[S,$]=(0,k.useState)(""),B=(0,c.useBlockProps)({className:"ksb-button-wrapper",style:{textAlign:e.align||"left"}}),R={backgroundColor:t||void 0,color:s||void 0,borderColor:i||void 0,borderWidth:r?`${r}px`:void 0,borderStyle:i?"solid":void 0,borderRadius:n?`${n}px`:void 0,padding:`${d}px ${x}px`,fontSize:u?`${u}px`:void 0,boxShadow:g?`0 2px 5px ${_}`:void 0,width:"full"===w?"100%":"auto",display:"inline-block",textDecoration:"none",cursor:"pointer"},T=e=>({backgroundColor:e.backgroundColor||"#007cba",color:e.textColor||"#ffffff",borderColor:e.borderColor||"transparent",borderWidth:`${e.borderWidth||0}px`,borderStyle:e.borderColor?"solid":"none",borderRadius:`${e.borderRadius||0}px`,padding:"6px 12px",fontSize:"12px",display:"inline-block",boxShadow:e.hasShadow?"0 2px 5px rgba(0,0,0,0.3)":"none"});return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(c.InspectorControls,{children:[(0,p.jsxs)(h.PanelBody,{title:(0,b.__)("スタイルプリセット","kashiwazaki-seo-blocks"),initialOpen:!0,children:[y.length>0?(0,p.jsx)("div",{style:{marginBottom:"15px"},children:y.map(e=>(0,p.jsxs)(h.Flex,{align:"center",style:{marginBottom:"8px",padding:"8px",background:"#f0f0f0",borderRadius:"4px"},children:[(0,p.jsx)(h.FlexItem,{children:(0,p.jsx)("span",{style:T(e),children:e.name})}),(0,p.jsx)(h.FlexItem,{children:(0,p.jsx)(h.Button,{isSmall:!0,variant:"secondary",onClick:()=>(e=>{a({backgroundColor:e.backgroundColor,textColor:e.textColor,borderColor:e.borderColor||"",borderWidth:e.borderWidth,borderRadius:e.borderRadius,paddingVertical:e.paddingVertical,paddingHorizontal:e.paddingHorizontal,fontSize:e.fontSize,hasShadow:e.hasShadow,buttonWidth:e.buttonWidth})})(e),children:"適用"})}),(0,p.jsx)(h.FlexItem,{children:(0,p.jsx)(h.Button,{isSmall:!0,isDestructive:!0,onClick:()=>(e=>{const a=y.filter(a=>a.id!==e);f(a),v(a)})(e.id),children:"削除"})})]},e.id))}):(0,p.jsx)("p",{style:{color:"#666",fontSize:"12px",marginBottom:"15px"},children:"プリセットがありません。現在のスタイルを保存して、他のボタンに適用できます。"}),(0,p.jsx)(h.Button,{variant:"secondary",onClick:()=>z(!0),style:{width:"100%"},children:"現在のスタイルをプリセットとして保存"})]}),(0,p.jsxs)(h.PanelBody,{title:(0,b.__)("基本設定","kashiwazaki-seo-blocks"),children:[(0,p.jsx)(h.TextControl,{label:(0,b.__)("リンクURL","kashiwazaki-seo-blocks"),value:l,onChange:e=>a({url:e})}),(0,p.jsx)(h.ToggleControl,{label:(0,b.__)("新しいタブで開く","kashiwazaki-seo-blocks"),checked:C,onChange:e=>a({openInNewTab:e})}),(0,p.jsx)(h.SelectControl,{label:(0,b.__)("ボタンの幅","kashiwazaki-seo-blocks"),value:w,options:[{label:"自動",value:"auto"},{label:"全幅",value:"full"}],onChange:e=>a({buttonWidth:e})})]}),(0,p.jsx)(c.PanelColorSettings,{title:(0,b.__)("カラー設定","kashiwazaki-seo-blocks"),colorSettings:[{value:t,onChange:e=>a({backgroundColor:e}),label:(0,b.__)("背景色","kashiwazaki-seo-blocks")},{value:s,onChange:e=>a({textColor:e}),label:(0,b.__)("文字色","kashiwazaki-seo-blocks")},{value:i,onChange:e=>a({borderColor:e}),label:(0,b.__)("枠線色","kashiwazaki-seo-blocks")}]}),(0,p.jsxs)(h.PanelBody,{title:(0,b.__)("スペーシング","kashiwazaki-seo-blocks"),children:[(0,p.jsx)(h.RangeControl,{label:(0,b.__)("上下余白 (px)","kashiwazaki-seo-blocks"),value:d,onChange:e=>a({paddingVertical:e}),min:0,max:50}),(0,p.jsx)(h.RangeControl,{label:(0,b.__)("左右余白 (px)","kashiwazaki-seo-blocks"),value:x,onChange:e=>a({paddingHorizontal:e}),min:0,max:100}),(0,p.jsx)(h.RangeControl,{label:(0,b.__)("文字サイズ (px)","kashiwazaki-seo-blocks"),value:u,onChange:e=>a({fontSize:e}),min:10,max:32})]}),(0,p.jsxs)(h.PanelBody,{title:(0,b.__)("枠線設定","kashiwazaki-seo-blocks"),children:[(0,p.jsx)(h.RangeControl,{label:(0,b.__)("枠線の太さ (px)","kashiwazaki-seo-blocks"),value:r,onChange:e=>a({borderWidth:e}),min:0,max:10}),(0,p.jsx)(h.RangeControl,{label:(0,b.__)("角の丸み (px)","kashiwazaki-seo-blocks"),value:n,onChange:e=>a({borderRadius:e}),min:0,max:50})]}),(0,p.jsx)(h.PanelBody,{title:(0,b.__)("影の設定","kashiwazaki-seo-blocks"),children:(0,p.jsx)(h.ToggleControl,{label:(0,b.__)("影を付ける","kashiwazaki-seo-blocks"),checked:g,onChange:e=>a({hasShadow:e})})})]}),(0,p.jsx)("div",{...B,children:(0,p.jsx)("div",{className:"ksb-button",style:R,children:(0,p.jsx)(c.RichText,{className:"ksb-button-text",tagName:"span",value:o,onChange:e=>a({text:e}),placeholder:(0,b.__)("ボタンテキスト...","kashiwazaki-seo-blocks")})})}),j&&(0,p.jsxs)(h.Modal,{title:(0,b.__)("プリセットとして保存","kashiwazaki-seo-blocks"),onRequestClose:()=>z(!1),children:[(0,p.jsx)(h.TextControl,{label:(0,b.__)("プリセット名","kashiwazaki-seo-blocks"),value:S,onChange:$,placeholder:"例: メインボタン、CTAボタン"}),(0,p.jsxs)("div",{style:{marginTop:"15px",padding:"15px",background:"#f0f0f0",borderRadius:"4px"},children:[(0,p.jsx)("p",{style:{marginTop:0,marginBottom:"10px",fontWeight:"bold"},children:"プレビュー:"}),(0,p.jsx)("span",{style:R,children:S||"ボタン"})]}),(0,p.jsxs)(h.Flex,{justify:"flex-end",style:{marginTop:"20px"},children:[(0,p.jsx)(h.FlexItem,{children:(0,p.jsx)(h.Button,{variant:"secondary",onClick:()=>z(!1),children:"キャンセル"})}),(0,p.jsx)(h.FlexItem,{children:(0,p.jsx)(h.Button,{variant:"primary",onClick:()=>{if(!S.trim())return;const e={id:Date.now().toString(),name:S.trim(),backgroundColor:t,textColor:s,borderColor:i||"",borderWidth:r,borderRadius:n,paddingVertical:d,paddingHorizontal:x,fontSize:u,hasShadow:g,buttonWidth:w},a=[...y,e];f(a),v(a),$(""),z(!1)},disabled:!S.trim(),children:"保存"})})]})]})]})},save:({attributes:e})=>{const{text:a,url:o,backgroundColor:l,textColor:t,borderColor:s,borderWidth:i,borderRadius:r,paddingVertical:n,paddingHorizontal:d,fontSize:b,hasShadow:h,shadowColor:k,openInNewTab:x,buttonWidth:u}=e,g=c.useBlockProps.save({className:"ksb-button-wrapper",style:{textAlign:e.align||"left"}}),m={backgroundColor:l||void 0,color:t||void 0,borderColor:s||void 0,borderWidth:i?`${i}px`:void 0,borderStyle:s?"solid":void 0,borderRadius:r?`${r}px`:void 0,padding:`${n}px ${d}px`,fontSize:b?`${b}px`:void 0,boxShadow:h?`0 2px 5px ${k}`:void 0,width:"full"===u?"100%":"auto",display:"inline-block",textDecoration:"none"};return(0,p.jsx)("div",{...g,children:(0,p.jsx)("a",{className:"ksb-button",href:o||"#",style:m,target:x?"_blank":void 0,rel:x?"noopener noreferrer":void 0,children:(0,p.jsx)(c.RichText.Content,{className:"ksb-button-text",tagName:"span",value:a})})})}},w="ksb_box_presets",y=()=>{try{const e=window.ksbData?.boxPresets||[],a=localStorage.getItem(w),o=a?JSON.parse(a):[];return e.length>0?(localStorage.setItem(w,JSON.stringify(e)),e):o}catch(e){return[]}},f=e=>{try{if(localStorage.setItem(w,JSON.stringify(e)),window.ksbData?.ajaxUrl&&window.ksbData?.nonce){const a=new FormData;a.append("action","ksb_save_box_presets"),a.append("nonce",window.ksbData.nonce),a.append("presets",JSON.stringify(e)),fetch(window.ksbData.ajaxUrl,{method:"POST",body:a,credentials:"same-origin"}).catch(e=>console.error("Failed to sync box presets:",e))}}catch(e){console.error("Failed to save box presets:",e)}},j="kashiwazaki-seo-blocks/box",z={title:(0,b.__)("汎用ボックス","kashiwazaki-seo-blocks"),description:(0,b.__)("カスタマイズ可能な汎用ボックス","kashiwazaki-seo-blocks"),category:"kashiwazaki-seo-blocks",icon:"archive",supports:{html:!1,align:["wide","full"]},attributes:{backgroundColor:{type:"string",default:""},borderColor:{type:"string",default:""},borderWidth:{type:"number",default:2},borderRadius:{type:"number",default:0},borderStyle:{type:"string",default:"solid"},paddingTop:{type:"number",default:20},paddingBottom:{type:"number",default:20},paddingLeft:{type:"number",default:20},paddingRight:{type:"number",default:20},marginTop:{type:"number",default:0},marginBottom:{type:"number",default:0},marginLeft:{type:"number",default:0},marginRight:{type:"number",default:0},hasShadow:{type:"boolean",default:!1},shadowColor:{type:"string",default:"rgba(0,0,0,0.1)"},shadowSpread:{type:"number",default:5},backgroundGradient:{type:"boolean",default:!1},gradientColor1:{type:"string",default:"#ffffff"},gradientColor2:{type:"string",default:"#f0f0f0"},hasIcon:{type:"boolean",default:!1},iconType:{type:"string",default:"info"},boxWidth:{type:"number",default:100},boxWidthUnit:{type:"string",default:"%"},boxAlignment:{type:"string",default:"none"}},edit:({attributes:e,setAttributes:a})=>{const{backgroundColor:o,borderColor:l,borderWidth:t,borderRadius:s,borderStyle:i,paddingTop:r,paddingBottom:n,paddingLeft:d,paddingRight:x,marginTop:u,marginBottom:g,marginLeft:m,marginRight:v,hasShadow:_,shadowColor:C,shadowSpread:w,backgroundGradient:j,gradientColor1:z,gradientColor2:S,hasIcon:$,iconType:B,boxWidth:R,boxWidthUnit:T,boxAlignment:W}=e,[P,N]=(0,k.useState)(y),[I,F]=(0,k.useState)(!1),[D,O]=(0,k.useState)(""),U=e=>({display:"inline-block",width:"40px",height:"24px",background:e.backgroundGradient?`linear-gradient(135deg, ${e.gradientColor1} 0%, ${e.gradientColor2} 100%)`:e.backgroundColor||"#f5f5f5",borderColor:e.borderColor||"#ccc",borderWidth:`${e.borderWidth||1}px`,borderStyle:e.borderStyle||"solid",borderRadius:`${e.borderRadius||0}px`,boxShadow:e.hasShadow?`0 0 ${e.shadowSpread||5}px rgba(0,0,0,0.1)`:"none"}),L=j?`linear-gradient(135deg, ${z} 0%, ${S} 100%)`:o;let A,H;"center"===W?(A="auto",H="auto"):"left"===W?(A=void 0!==m?`${m}px`:0,H="auto"):"right"===W?(A="auto",H=void 0!==v?`${v}px`:0):(A=void 0!==m?`${m}px`:void 0,H=void 0!==v?`${v}px`:void 0);const M=(0,c.useBlockProps)({className:"ksb-box "+($?`ksb-box-icon-${B}`:""),style:{background:L||void 0,borderColor:l||void 0,borderWidth:void 0!==t?`${t}px`:void 0,borderStyle:0===t?"none":i||void 0,borderRadius:s?`${s}px`:void 0,paddingTop:void 0!==r?`${r}px`:void 0,paddingBottom:void 0!==n?`${n}px`:void 0,paddingLeft:void 0!==d?`${d}px`:void 0,paddingRight:void 0!==x?`${x}px`:void 0,marginTop:void 0!==u?`${u}px`:void 0,marginBottom:void 0!==g?`${g}px`:void 0,marginLeft:A,marginRight:H,maxWidth:R?`${R}${T}`:void 0,boxShadow:_?`0 0 ${w}px ${C}`:void 0}});return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(c.InspectorControls,{children:[(0,p.jsxs)(h.PanelBody,{title:(0,b.__)("スタイルプリセット","kashiwazaki-seo-blocks"),initialOpen:!0,children:[P.length>0?(0,p.jsx)("div",{style:{marginBottom:"15px"},children:P.map(e=>(0,p.jsxs)(h.Flex,{align:"center",style:{marginBottom:"8px",padding:"8px",background:"#f0f0f0",borderRadius:"4px"},children:[(0,p.jsx)(h.FlexItem,{children:(0,p.jsx)("span",{style:U(e)})}),(0,p.jsx)(h.FlexItem,{style:{flexGrow:1,fontSize:"12px"},children:e.name}),(0,p.jsx)(h.FlexItem,{children:(0,p.jsx)(h.Button,{isSmall:!0,variant:"secondary",onClick:()=>(e=>{a({backgroundColor:e.backgroundColor||"",borderColor:e.borderColor||"",borderWidth:e.borderWidth,borderRadius:e.borderRadius,borderStyle:e.borderStyle,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,paddingLeft:e.paddingLeft,paddingRight:e.paddingRight,hasShadow:e.hasShadow,shadowSpread:e.shadowSpread,backgroundGradient:e.backgroundGradient,gradientColor1:e.gradientColor1,gradientColor2:e.gradientColor2,hasIcon:e.hasIcon,iconType:e.iconType})})(e),children:"適用"})}),(0,p.jsx)(h.FlexItem,{children:(0,p.jsx)(h.Button,{isSmall:!0,isDestructive:!0,onClick:()=>(e=>{const a=P.filter(a=>a.id!==e);N(a),f(a)})(e.id),children:"削除"})})]},e.id))}):(0,p.jsx)("p",{style:{color:"#666",fontSize:"12px",marginBottom:"15px"},children:"プリセットがありません。現在のスタイルを保存できます。"}),(0,p.jsx)(h.Button,{variant:"secondary",onClick:()=>F(!0),style:{width:"100%"},children:"現在のスタイルをプリセットとして保存"})]}),(0,p.jsxs)(h.PanelBody,{title:(0,b.__)("基本設定","kashiwazaki-seo-blocks"),children:[(0,p.jsx)(h.ToggleControl,{label:(0,b.__)("アイコンを表示","kashiwazaki-seo-blocks"),checked:$,onChange:e=>a({hasIcon:e})}),$&&(0,p.jsx)(h.SelectControl,{label:(0,b.__)("アイコンタイプ","kashiwazaki-seo-blocks"),value:B,options:[{label:"情報",value:"info"},{label:"警告",value:"warning"},{label:"成功",value:"success"},{label:"注意",value:"alert"},{label:"ヒント",value:"tip"}],onChange:e=>a({iconType:e})})]}),(0,p.jsxs)(h.PanelBody,{title:(0,b.__)("レイアウト設定","kashiwazaki-seo-blocks"),children:[(0,p.jsxs)("div",{style:{display:"flex",gap:"8px",alignItems:"flex-end"},children:[(0,p.jsx)("div",{style:{flex:1},children:(0,p.jsx)(h.RangeControl,{label:(0,b.__)("最大幅","kashiwazaki-seo-blocks"),value:R,onChange:e=>a({boxWidth:e}),min:"%"===T?1:100,max:"%"===T?100:2e3,step:"%"===T?1:10})}),(0,p.jsx)(h.SelectControl,{value:T,options:[{label:"%",value:"%"},{label:"px",value:"px"}],onChange:e=>{a({boxWidthUnit:e}),"%"===e&&R>100?a({boxWidth:100}):"px"===e&&R<100&&a({boxWidth:500})},style:{minWidth:"70px",marginBottom:"8px"}})]}),(0,p.jsx)(h.SelectControl,{label:(0,b.__)("配置","kashiwazaki-seo-blocks"),value:W,options:[{label:"なし",value:"none"},{label:"左寄せ",value:"left"},{label:"中央",value:"center"},{label:"右寄せ",value:"right"}],onChange:e=>a({boxAlignment:e}),help:"none"!==W?(0,b.__)("配置を設定すると、左右のマージンが自動調整されます","kashiwazaki-seo-blocks"):""})]}),(0,p.jsx)(h.PanelBody,{title:(0,b.__)("背景設定","kashiwazaki-seo-blocks"),children:(0,p.jsx)(h.ToggleControl,{label:(0,b.__)("グラデーション背景","kashiwazaki-seo-blocks"),checked:j,onChange:e=>a({backgroundGradient:e})})}),(0,p.jsx)(c.PanelColorSettings,{title:(0,b.__)("カラー設定","kashiwazaki-seo-blocks"),colorSettings:[...j?[{value:z,onChange:e=>a({gradientColor1:e}),label:(0,b.__)("グラデーション開始色","kashiwazaki-seo-blocks")},{value:S,onChange:e=>a({gradientColor2:e}),label:(0,b.__)("グラデーション終了色","kashiwazaki-seo-blocks")}]:[{value:o,onChange:e=>a({backgroundColor:e}),label:(0,b.__)("背景色","kashiwazaki-seo-blocks")}],{value:l,onChange:e=>a({borderColor:e}),label:(0,b.__)("枠線色","kashiwazaki-seo-blocks")}]}),(0,p.jsxs)(h.PanelBody,{title:(0,b.__)("内側余白（パディング）","kashiwazaki-seo-blocks"),children:[(0,p.jsx)(h.RangeControl,{label:(0,b.__)("上 (px)","kashiwazaki-seo-blocks"),value:r,onChange:e=>a({paddingTop:e}),min:0,max:100}),(0,p.jsx)(h.RangeControl,{label:(0,b.__)("下 (px)","kashiwazaki-seo-blocks"),value:n,onChange:e=>a({paddingBottom:e}),min:0,max:100}),(0,p.jsx)(h.RangeControl,{label:(0,b.__)("左 (px)","kashiwazaki-seo-blocks"),value:d,onChange:e=>a({paddingLeft:e}),min:0,max:100}),(0,p.jsx)(h.RangeControl,{label:(0,b.__)("右 (px)","kashiwazaki-seo-blocks"),value:x,onChange:e=>a({paddingRight:e}),min:0,max:100})]}),(0,p.jsxs)(h.PanelBody,{title:(0,b.__)("外側余白（マージン）","kashiwazaki-seo-blocks"),children:[(0,p.jsx)(h.RangeControl,{label:(0,b.__)("上 (px)","kashiwazaki-seo-blocks"),value:u,onChange:e=>a({marginTop:e}),min:0,max:100}),(0,p.jsx)(h.RangeControl,{label:(0,b.__)("下 (px)","kashiwazaki-seo-blocks"),value:g,onChange:e=>a({marginBottom:e}),min:0,max:100}),(0,p.jsx)(h.RangeControl,{label:(0,b.__)("左 (px)","kashiwazaki-seo-blocks"),value:m,onChange:e=>a({marginLeft:e}),min:0,max:100}),(0,p.jsx)(h.RangeControl,{label:(0,b.__)("右 (px)","kashiwazaki-seo-blocks"),value:v,onChange:e=>a({marginRight:e}),min:0,max:100})]}),(0,p.jsxs)(h.PanelBody,{title:(0,b.__)("枠線設定","kashiwazaki-seo-blocks"),children:[(0,p.jsx)(h.SelectControl,{label:(0,b.__)("枠線スタイル","kashiwazaki-seo-blocks"),value:i,options:[{label:"なし",value:"none"},{label:"実線",value:"solid"},{label:"点線",value:"dotted"},{label:"破線",value:"dashed"},{label:"二重線",value:"double"}],onChange:e=>a({borderStyle:e})}),(0,p.jsx)(h.RangeControl,{label:(0,b.__)("枠線の太さ (px)","kashiwazaki-seo-blocks"),value:t,onChange:e=>a({borderWidth:e}),min:0,max:10}),(0,p.jsx)(h.RangeControl,{label:(0,b.__)("角の丸み (px)","kashiwazaki-seo-blocks"),value:s,onChange:e=>a({borderRadius:e}),min:0,max:50})]}),(0,p.jsxs)(h.PanelBody,{title:(0,b.__)("影の設定","kashiwazaki-seo-blocks"),children:[(0,p.jsx)(h.ToggleControl,{label:(0,b.__)("影を付ける","kashiwazaki-seo-blocks"),checked:_,onChange:e=>a({hasShadow:e})}),_&&(0,p.jsx)(h.RangeControl,{label:(0,b.__)("影の広がり (px)","kashiwazaki-seo-blocks"),value:w,onChange:e=>a({shadowSpread:e}),min:0,max:30})]})]}),(0,p.jsx)("div",{...M,children:(0,p.jsx)(c.InnerBlocks,{template:[["core/paragraph",{placeholder:"ここにコンテンツを入力..."}]]})}),I&&(0,p.jsxs)(h.Modal,{title:(0,b.__)("プリセットとして保存","kashiwazaki-seo-blocks"),onRequestClose:()=>F(!1),children:[(0,p.jsx)(h.TextControl,{label:(0,b.__)("プリセット名","kashiwazaki-seo-blocks"),value:D,onChange:O,placeholder:"例: 注意ボックス、情報ボックス"}),(0,p.jsxs)("div",{style:{marginTop:"15px",padding:"15px",background:"#f0f0f0",borderRadius:"4px"},children:[(0,p.jsx)("p",{style:{marginTop:0,marginBottom:"10px",fontWeight:"bold"},children:"プレビュー:"}),(0,p.jsx)("div",{style:{background:j?`linear-gradient(135deg, ${z} 0%, ${S} 100%)`:o||"#f5f5f5",borderColor:l||"#ccc",borderWidth:`${t}px`,borderStyle:i||"solid",borderRadius:`${s}px`,padding:"15px",boxShadow:_?`0 0 ${w}px rgba(0,0,0,0.1)`:"none"},children:(0,p.jsx)("span",{style:{fontSize:"12px",color:"#666"},children:D||"ボックス"})})]}),(0,p.jsxs)(h.Flex,{justify:"flex-end",style:{marginTop:"20px"},children:[(0,p.jsx)(h.FlexItem,{children:(0,p.jsx)(h.Button,{variant:"secondary",onClick:()=>F(!1),children:"キャンセル"})}),(0,p.jsx)(h.FlexItem,{children:(0,p.jsx)(h.Button,{variant:"primary",onClick:()=>{if(!D.trim())return;const e={id:Date.now().toString(),name:D.trim(),backgroundColor:o,borderColor:l,borderWidth:t,borderRadius:s,borderStyle:i,paddingTop:r,paddingBottom:n,paddingLeft:d,paddingRight:x,hasShadow:_,shadowSpread:w,backgroundGradient:j,gradientColor1:z,gradientColor2:S,hasIcon:$,iconType:B},a=[...P,e];N(a),f(a),O(""),F(!1)},disabled:!D.trim(),children:"保存"})})]})]})]})},save:({attributes:e})=>{const{backgroundColor:a,borderColor:o,borderWidth:l,borderRadius:t,borderStyle:s,paddingTop:i,paddingBottom:r,paddingLeft:n,paddingRight:d,marginTop:b,marginBottom:h,marginLeft:k,marginRight:x,hasShadow:u,shadowColor:g,shadowSpread:m,backgroundGradient:v,gradientColor1:_,gradientColor2:C,hasIcon:w,iconType:y,boxWidth:f,boxWidthUnit:j,boxAlignment:z}=e,S=v?`linear-gradient(135deg, ${_} 0%, ${C} 100%)`:a;let $,B;"center"===z?($="auto",B="auto"):"left"===z?($=void 0!==k?`${k}px`:0,B="auto"):"right"===z?($="auto",B=void 0!==x?`${x}px`:0):($=void 0!==k?`${k}px`:void 0,B=void 0!==x?`${x}px`:void 0);const R=c.useBlockProps.save({className:"ksb-box "+(w?`ksb-box-icon-${y}`:""),style:{background:S||void 0,borderColor:o||void 0,borderWidth:void 0!==l?`${l}px`:void 0,borderStyle:0===l?"none":s||void 0,borderRadius:t?`${t}px`:void 0,paddingTop:void 0!==i?`${i}px`:void 0,paddingBottom:void 0!==r?`${r}px`:void 0,paddingLeft:void 0!==n?`${n}px`:void 0,paddingRight:void 0!==d?`${d}px`:void 0,marginTop:void 0!==b?`${b}px`:void 0,marginBottom:void 0!==h?`${h}px`:void 0,marginLeft:$,marginRight:B,maxWidth:f?`${f}${j}`:void 0,boxShadow:u?`0 0 ${m}px ${g}`:void 0}});return(0,p.jsx)("div",{...R,children:(0,p.jsx)(c.InnerBlocks.Content,{})})}},S="kashiwazaki-seo-blocks/border",$={title:(0,b.__)("ボーダー","kashiwazaki-seo-blocks"),description:(0,b.__)("カスタマイズ可能な区切り線","kashiwazaki-seo-blocks"),category:"kashiwazaki-seo-blocks",icon:"minus",supports:{html:!1,align:["wide","full"]},attributes:{borderStyle:{type:"string",default:"solid"},borderColor:{type:"string",default:"#e0e0e0"},borderWidth:{type:"number",default:1},width:{type:"number",default:100},marginTop:{type:"number",default:20},marginBottom:{type:"number",default:20}},edit:({attributes:e,setAttributes:a})=>{const{borderStyle:o,borderColor:l,borderWidth:t,width:s,marginTop:i,marginBottom:r}=e,n=(0,c.useBlockProps)({className:"ksb-border-wrapper",style:{marginTop:`${i}px`,marginBottom:`${r}px`}}),d={borderTop:`${t}px ${o} ${l}`,width:`${s}%`,margin:"0 auto",borderBottom:"none",borderLeft:"none",borderRight:"none",background:"transparent"};return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(c.InspectorControls,{children:[(0,p.jsxs)(h.PanelBody,{title:(0,b.__)("ボーダー設定","kashiwazaki-seo-blocks"),children:[(0,p.jsx)(h.SelectControl,{label:(0,b.__)("線のスタイル","kashiwazaki-seo-blocks"),value:o,options:[{label:"実線",value:"solid"},{label:"点線",value:"dotted"},{label:"破線",value:"dashed"},{label:"二重線",value:"double"}],onChange:e=>a({borderStyle:e})}),(0,p.jsx)(h.RangeControl,{label:(0,b.__)("線の太さ (px)","kashiwazaki-seo-blocks"),value:t,onChange:e=>a({borderWidth:e}),min:1,max:10}),(0,p.jsx)(h.RangeControl,{label:(0,b.__)("幅 (%)","kashiwazaki-seo-blocks"),value:s,onChange:e=>a({width:e}),min:10,max:100,step:10})]}),(0,p.jsx)(c.PanelColorSettings,{title:(0,b.__)("カラー設定","kashiwazaki-seo-blocks"),colorSettings:[{value:l,onChange:e=>a({borderColor:e}),label:(0,b.__)("線の色","kashiwazaki-seo-blocks")}]}),(0,p.jsxs)(h.PanelBody,{title:(0,b.__)("スペーシング","kashiwazaki-seo-blocks"),children:[(0,p.jsx)(h.RangeControl,{label:(0,b.__)("上側余白 (px)","kashiwazaki-seo-blocks"),value:i,onChange:e=>a({marginTop:e}),min:0,max:100}),(0,p.jsx)(h.RangeControl,{label:(0,b.__)("下側余白 (px)","kashiwazaki-seo-blocks"),value:r,onChange:e=>a({marginBottom:e}),min:0,max:100})]})]}),(0,p.jsx)("div",{...n,children:(0,p.jsx)("hr",{style:d})})]})},save:({attributes:e})=>{const{borderStyle:a,borderColor:o,borderWidth:l,width:t,marginTop:s,marginBottom:i}=e,r=c.useBlockProps.save({className:"ksb-border-wrapper",style:{marginTop:`${s}px`,marginBottom:`${i}px`}}),n={borderTop:`${l}px ${a} ${o}`,width:`${t}%`,margin:"0 auto",borderBottom:"none",borderLeft:"none",borderRight:"none",background:"transparent"};return(0,p.jsx)("div",{...r,children:(0,p.jsx)("hr",{style:n})})}},B="kashiwazaki-seo-blocks/table",R={title:(0,b.__)("テーブル","kashiwazaki-seo-blocks"),description:(0,b.__)("カスタマイズ可能なテーブル","kashiwazaki-seo-blocks"),category:"kashiwazaki-seo-blocks",icon:"editor-table",supports:{html:!1,align:["wide","full"]},attributes:{rows:{type:"number",default:3},columns:{type:"number",default:3},tableData:{type:"array",default:[]},hasHeader:{type:"boolean",default:!0},headerBackgroundColor:{type:"string",default:"#007cba"},headerTextColor:{type:"string",default:"#ffffff"},cellBackgroundColor:{type:"string",default:"#ffffff"},cellTextColor:{type:"string",default:"#333333"},borderColor:{type:"string",default:"#e0e0e0"},borderWidth:{type:"number",default:1},cellPadding:{type:"number",default:10},striped:{type:"boolean",default:!1},hoverable:{type:"boolean",default:!1},textAlign:{type:"string",default:"left"},enableScroll:{type:"boolean",default:!1},tableWidth:{type:"number",default:0},tableMinWidth:{type:"number",default:0}},edit:({attributes:e,setAttributes:a})=>{const{rows:o,columns:l,tableData:t,hasHeader:s,headerBackgroundColor:i,headerTextColor:r,cellBackgroundColor:n,cellTextColor:d,borderColor:k,borderWidth:x,cellPadding:u,striped:g,hoverable:m,textAlign:v,enableScroll:_,tableWidth:C,tableMinWidth:w}=e;0===t.length&&a({tableData:(()=>{const e=[];for(let a=0;a<o;a++){const a=[];for(let e=0;e<l;e++)a.push("");e.push(a)}return e})()});const y=(e,o,l)=>{const s=[...t];s[e]||(s[e]=[]),s[e][o]=l,a({tableData:s})},f=(0,c.useBlockProps)({className:`ksb-table-wrapper ${g?"ksb-table-striped":""} ${m?"ksb-table-hoverable":""} ${_?"ksb-table-scrollable":""}`,style:_?{overflowX:"auto",width:"100%"}:{}}),j={borderCollapse:"collapse",width:C>0?`${C}%`:"100%",minWidth:w>0?`${w}px`:"auto",border:`${x}px solid ${k}`},z={border:`${x}px solid ${k}`,padding:`${u}px`,textAlign:v},S={...z,backgroundColor:i,color:r,fontWeight:"bold"},$={...z,backgroundColor:n,color:d};return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(c.InspectorControls,{children:[(0,p.jsxs)(h.PanelBody,{title:(0,b.__)("テーブル設定","kashiwazaki-seo-blocks"),children:[(0,p.jsx)(h.ToggleControl,{label:(0,b.__)("ヘッダー行","kashiwazaki-seo-blocks"),checked:s,onChange:e=>a({hasHeader:e})}),(0,p.jsx)(h.ToggleControl,{label:(0,b.__)("ストライプ模様","kashiwazaki-seo-blocks"),checked:g,onChange:e=>a({striped:e})}),(0,p.jsx)(h.ToggleControl,{label:(0,b.__)("ホバー効果","kashiwazaki-seo-blocks"),checked:m,onChange:e=>a({hoverable:e})}),(0,p.jsx)(h.SelectControl,{label:(0,b.__)("文字の配置","kashiwazaki-seo-blocks"),value:v,options:[{label:"左揃え",value:"left"},{label:"中央揃え",value:"center"},{label:"右揃え",value:"right"}],onChange:e=>a({textAlign:e})}),(0,p.jsx)(h.ToggleControl,{label:(0,b.__)("スクロール機能を有効化","kashiwazaki-seo-blocks"),checked:_,onChange:e=>a({enableScroll:e}),help:(0,b.__)("テーブルがコンテナ幅を超えた場合に横スクロールを表示","kashiwazaki-seo-blocks")}),(0,p.jsxs)("div",{style:{marginTop:"20px"},children:[(0,p.jsx)(h.Button,{isSecondary:!0,onClick:()=>{const e=[...t],s=[];for(let e=0;e<l;e++)s.push("");e.push(s),a({tableData:e,rows:o+1})},style:{marginRight:"10px"},children:(0,b.__)("行を追加","kashiwazaki-seo-blocks")}),(0,p.jsx)(h.Button,{isSecondary:!0,onClick:()=>{if(o>1){const e=t.slice(0,-1);a({tableData:e,rows:o-1})}},disabled:o<=1,children:(0,b.__)("行を削除","kashiwazaki-seo-blocks")})]}),(0,p.jsxs)("div",{style:{marginTop:"10px"},children:[(0,p.jsx)(h.Button,{isSecondary:!0,onClick:()=>{const e=t.map(e=>[...e,""]);a({tableData:e,columns:l+1})},style:{marginRight:"10px"},children:(0,b.__)("列を追加","kashiwazaki-seo-blocks")}),(0,p.jsx)(h.Button,{isSecondary:!0,onClick:()=>{if(l>1){const e=t.map(e=>e.slice(0,-1));a({tableData:e,columns:l-1})}},disabled:l<=1,children:(0,b.__)("列を削除","kashiwazaki-seo-blocks")})]})]}),(0,p.jsx)(c.PanelColorSettings,{title:(0,b.__)("カラー設定","kashiwazaki-seo-blocks"),colorSettings:[{value:i,onChange:e=>a({headerBackgroundColor:e}),label:(0,b.__)("ヘッダー背景色","kashiwazaki-seo-blocks")},{value:r,onChange:e=>a({headerTextColor:e}),label:(0,b.__)("ヘッダー文字色","kashiwazaki-seo-blocks")},{value:n,onChange:e=>a({cellBackgroundColor:e}),label:(0,b.__)("セル背景色","kashiwazaki-seo-blocks")},{value:d,onChange:e=>a({cellTextColor:e}),label:(0,b.__)("セル文字色","kashiwazaki-seo-blocks")},{value:k,onChange:e=>a({borderColor:e}),label:(0,b.__)("枠線色","kashiwazaki-seo-blocks")}]}),(0,p.jsxs)(h.PanelBody,{title:(0,b.__)("スペーシング","kashiwazaki-seo-blocks"),children:[(0,p.jsx)(h.RangeControl,{label:(0,b.__)("セル内余白 (px)","kashiwazaki-seo-blocks"),value:u,onChange:e=>a({cellPadding:e}),min:5,max:30}),(0,p.jsx)(h.RangeControl,{label:(0,b.__)("枠線の太さ (px)","kashiwazaki-seo-blocks"),value:x,onChange:e=>a({borderWidth:e}),min:0,max:5})]}),(0,p.jsxs)(h.PanelBody,{title:(0,b.__)("テーブルサイズ","kashiwazaki-seo-blocks"),children:[(0,p.jsx)(h.RangeControl,{label:(0,b.__)("テーブル幅 (%)","kashiwazaki-seo-blocks"),value:C,onChange:e=>a({tableWidth:e}),min:0,max:100,step:5,help:(0,b.__)("0の場合は幅の制限なし","kashiwazaki-seo-blocks")}),(0,p.jsx)(h.RangeControl,{label:(0,b.__)("テーブル最小幅 (px)","kashiwazaki-seo-blocks"),value:w,onChange:e=>a({tableMinWidth:e}),min:0,max:2e3,step:50,help:(0,b.__)("0の場合は最小幅の制限なし","kashiwazaki-seo-blocks")})]})]}),(0,p.jsx)("div",{...f,children:(0,p.jsxs)("table",{style:j,children:[s&&(0,p.jsx)("thead",{children:(0,p.jsx)("tr",{children:Array.from({length:l}).map((e,a)=>(0,p.jsx)("th",{style:S,children:(0,p.jsx)(c.RichText,{value:t[0]&&t[0][a]||"",onChange:e=>y(0,a,e),placeholder:(0,b.__)("ヘッダー","kashiwazaki-seo-blocks")})},a))})}),(0,p.jsx)("tbody",{children:Array.from({length:s?o-1:o}).map((e,a)=>{const o=s?a+1:a;return(0,p.jsx)("tr",{children:Array.from({length:l}).map((e,a)=>(0,p.jsx)("td",{style:$,children:(0,p.jsx)(c.RichText,{value:t[o]&&t[o][a]||"",onChange:e=>y(o,a,e),placeholder:(0,b.__)("セル","kashiwazaki-seo-blocks")})},a))},o)})})]})})]})},save:({attributes:e})=>{const{rows:a,columns:o,tableData:l,hasHeader:t,headerBackgroundColor:s,headerTextColor:i,cellBackgroundColor:r,cellTextColor:n,borderColor:d,borderWidth:b,cellPadding:h,striped:k,hoverable:x,textAlign:u,enableScroll:g,tableWidth:m,tableMinWidth:v}=e,_=c.useBlockProps.save({className:`ksb-table-wrapper ${k?"ksb-table-striped":""} ${x?"ksb-table-hoverable":""} ${g?"ksb-table-scrollable":""}`}),C={borderCollapse:"collapse",width:m>0?`${m}%`:"100%",minWidth:v>0?`${v}px`:"auto",border:`${b}px solid ${d}`},w={border:`${b}px solid ${d}`,padding:`${h}px`,textAlign:u},y={...w,backgroundColor:s,color:i,fontWeight:"bold"},f={...w,backgroundColor:r,color:n};return(0,p.jsx)("div",{..._,children:(0,p.jsxs)("table",{style:C,children:[t&&(0,p.jsx)("thead",{children:(0,p.jsx)("tr",{children:Array.from({length:o}).map((e,a)=>(0,p.jsx)("th",{style:y,children:(0,p.jsx)(c.RichText.Content,{value:l[0]&&l[0][a]||""})},a))})}),(0,p.jsx)("tbody",{children:Array.from({length:t?a-1:a}).map((e,a)=>{const s=t?a+1:a;return(0,p.jsx)("tr",{children:Array.from({length:o}).map((e,a)=>(0,p.jsx)("td",{style:f,children:(0,p.jsx)(c.RichText.Content,{value:l[s]&&l[s][a]||""})},a))},s)})})]})})}},T="ksb_speech_bubble_avatar_presets",W=e=>{try{if(localStorage.setItem(T,JSON.stringify(e)),window.ksbData?.ajaxUrl&&window.ksbData?.nonce){const a=new FormData;a.append("action","ksb_save_presets"),a.append("nonce",window.ksbData.nonce),a.append("presets",JSON.stringify(e)),fetch(window.ksbData.ajaxUrl,{method:"POST",body:a,credentials:"same-origin"}).catch(e=>console.error("Failed to sync presets to server:",e))}}catch(e){console.error("Failed to save presets:",e)}},P="kashiwazaki-seo-blocks/speech-bubble",N={title:(0,b.__)("吹き出し","kashiwazaki-seo-blocks"),description:(0,b.__)("人物画像付きの吹き出しブロック","kashiwazaki-seo-blocks"),category:"kashiwazaki-seo-blocks",icon:"format-chat",supports:{html:!1},attributes:{content:{type:"string",source:"html",selector:".ksb-speech-bubble-content",default:""},avatarUrl:{type:"string",default:""},avatarId:{type:"number",default:0},avatarPosition:{type:"string",default:"left"},avatarShape:{type:"string",default:"circle"},avatarSize:{type:"number",default:60},speakerName:{type:"string",default:""},speakerTitle:{type:"string",default:""},profileUrl:{type:"string",default:""},bubbleColor:{type:"string",default:"#f0f8ff"},textColor:{type:"string",default:"#333333"},borderColor:{type:"string",default:"#007cba"},borderWidth:{type:"number",default:2},showTail:{type:"boolean",default:!0},bubbleStyle:{type:"string",default:"standard"},nameLabelColor:{type:"string",default:"#007cba"},bubbleMaxWidth:{type:"number",default:100}},edit:({attributes:e,setAttributes:a})=>{const{content:o,avatarUrl:l,avatarId:t,avatarPosition:s,avatarShape:i,avatarSize:r,speakerName:n,speakerTitle:d,profileUrl:x,bubbleColor:u,textColor:g,borderColor:m,borderWidth:v,showTail:_,bubbleStyle:C,nameLabelColor:w,bubbleMaxWidth:y}=e,[f,j]=(0,k.useState)([]),[z,S]=(0,k.useState)(!1),[$,B]=(0,k.useState)(""),[R,P]=(0,k.useState)("");(0,k.useEffect)(()=>{j((()=>{try{const e=window.ksbData?.presets||[],a=localStorage.getItem(T),o=a?JSON.parse(a):[];return e.length>0?(localStorage.setItem(T,JSON.stringify(e)),e):o}catch(e){return[]}})())},[]);const N=(0,c.useBlockProps)({className:`ksb-speech-bubble-wrapper ksb-avatar-${s} ksb-bubble-${C}`}),I={backgroundColor:u,color:g,border:`${v}px solid ${m}`,borderRadius:"rounded"===C?"20px":"10px",padding:"15px 20px",position:"relative"},F={width:`${r}px`,height:`${r}px`,borderRadius:"circle"===i?"50%":"rounded"===i?"10px":"0",objectFit:"cover"},D={color:w,fontSize:"14px",marginTop:"5px",fontWeight:"bold"},O={color:w,fontSize:"11px",marginBottom:"3px",opacity:.8},U=(0,p.jsx)("div",{style:{...F,backgroundColor:"#e0e0e0",display:"flex",alignItems:"center",justifyContent:"center",fontSize:r/3+"px",color:"#666"},children:(0,p.jsx)("span",{children:(0,b.__)("画像","kashiwazaki-seo-blocks")})});return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(c.InspectorControls,{children:[(0,p.jsxs)(h.PanelBody,{title:(0,b.__)("アバタープリセット","kashiwazaki-seo-blocks"),initialOpen:!0,children:[f.length>0&&(0,p.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,p.jsx)(h.SelectControl,{label:(0,b.__)("保存済みプリセットから選択","kashiwazaki-seo-blocks"),value:R,options:[{label:(0,b.__)("-- 選択してください --","kashiwazaki-seo-blocks"),value:""},...f.map(e=>({label:e.name,value:e.id}))],onChange:e=>{P(e),e&&(e=>{const o=f.find(a=>a.id===e);o&&a({avatarUrl:o.avatarUrl||"",avatarId:o.avatarId||0,avatarPosition:o.avatarPosition||"left",avatarShape:o.avatarShape||"circle",avatarSize:o.avatarSize||60,speakerName:o.speakerName||"",speakerTitle:o.speakerTitle||"",profileUrl:o.profileUrl||"",nameLabelColor:o.nameLabelColor||"#007cba"}),P("")})(e)}}),(0,p.jsxs)("div",{style:{marginTop:"10px"},children:[(0,p.jsx)("p",{style:{fontSize:"12px",color:"#666",marginBottom:"5px"},children:(0,b.__)("プリセット管理:","kashiwazaki-seo-blocks")}),f.map(e=>(0,p.jsxs)(h.Flex,{style:{marginBottom:"5px",alignItems:"center"},children:[(0,p.jsx)(h.FlexItem,{style:{flex:1},children:(0,p.jsx)("span",{style:{fontSize:"13px"},children:e.name})}),(0,p.jsx)(h.FlexItem,{children:(0,p.jsx)(h.Button,{isSmall:!0,isDestructive:!0,onClick:()=>(e=>{const a=f.filter(a=>a.id!==e);W(a),j(a)})(e.id),children:(0,b.__)("削除","kashiwazaki-seo-blocks")})})]},e.id))]})]}),(0,p.jsx)(h.Button,{isPrimary:!0,onClick:()=>S(!0),style:{width:"100%"},children:(0,b.__)("現在の設定を保存","kashiwazaki-seo-blocks")}),0===f.length&&(0,p.jsx)("p",{style:{fontSize:"12px",color:"#666",marginTop:"10px"},children:(0,b.__)("アバター設定を保存すると、他の吹き出しで簡単に呼び出せます。","kashiwazaki-seo-blocks")})]}),(0,p.jsxs)(h.PanelBody,{title:(0,b.__)("アバター設定","kashiwazaki-seo-blocks"),children:[(0,p.jsx)(c.MediaUploadCheck,{children:(0,p.jsx)(c.MediaUpload,{onSelect:e=>{a({avatarUrl:e.url,avatarId:e.id})},allowedTypes:["image"],value:t,render:({open:e})=>(0,p.jsxs)("div",{children:[l&&(0,p.jsx)("div",{style:{marginBottom:"10px"},children:(0,p.jsx)("img",{src:l,alt:(0,b.__)("アバター","kashiwazaki-seo-blocks"),style:{maxWidth:"100px",height:"auto"}})}),(0,p.jsx)(h.Button,{onClick:e,isPrimary:!0,children:l?(0,b.__)("画像を変更","kashiwazaki-seo-blocks"):(0,b.__)("画像を選択","kashiwazaki-seo-blocks")}),l&&(0,p.jsx)(h.Button,{onClick:()=>{a({avatarUrl:"",avatarId:0})},isDestructive:!0,style:{marginLeft:"10px"},children:(0,b.__)("削除","kashiwazaki-seo-blocks")})]})})}),(0,p.jsx)(h.TextControl,{label:(0,b.__)("話者の名前","kashiwazaki-seo-blocks"),value:n,onChange:e=>a({speakerName:e}),placeholder:(0,b.__)("名前を入力","kashiwazaki-seo-blocks")}),(0,p.jsx)(h.TextControl,{label:(0,b.__)("肩書","kashiwazaki-seo-blocks"),value:d,onChange:e=>a({speakerTitle:e}),placeholder:(0,b.__)("肩書（オプション）","kashiwazaki-seo-blocks")}),(0,p.jsx)(h.TextControl,{label:(0,b.__)("プロフィールURL","kashiwazaki-seo-blocks"),value:x,onChange:e=>a({profileUrl:e}),placeholder:(0,b.__)("https://...（オプション）","kashiwazaki-seo-blocks"),type:"url"}),(0,p.jsx)(h.SelectControl,{label:(0,b.__)("アバターの位置","kashiwazaki-seo-blocks"),value:s,options:[{label:"左",value:"left"},{label:"右",value:"right"}],onChange:e=>a({avatarPosition:e})}),(0,p.jsx)(h.SelectControl,{label:(0,b.__)("アバターの形状","kashiwazaki-seo-blocks"),value:i,options:[{label:"円形",value:"circle"},{label:"角丸",value:"rounded"},{label:"四角",value:"square"}],onChange:e=>a({avatarShape:e})}),(0,p.jsx)(h.RangeControl,{label:(0,b.__)("アバターサイズ (px)","kashiwazaki-seo-blocks"),value:r,onChange:e=>a({avatarSize:e}),min:40,max:120})]}),(0,p.jsxs)(h.PanelBody,{title:(0,b.__)("吹き出し設定","kashiwazaki-seo-blocks"),children:[(0,p.jsx)(h.SelectControl,{label:(0,b.__)("吹き出しスタイル","kashiwazaki-seo-blocks"),value:C,options:[{label:"標準",value:"standard"},{label:"丸みを帯びた",value:"rounded"},{label:"考え事",value:"thought"}],onChange:e=>a({bubbleStyle:e})}),(0,p.jsx)(h.ToggleControl,{label:(0,b.__)("しっぽを表示","kashiwazaki-seo-blocks"),checked:_,onChange:e=>a({showTail:e})}),(0,p.jsx)(h.RangeControl,{label:(0,b.__)("枠線の太さ (px)","kashiwazaki-seo-blocks"),value:v,onChange:e=>a({borderWidth:e}),min:0,max:5}),(0,p.jsx)(h.RangeControl,{label:(0,b.__)("吹き出しの最大幅 (%)","kashiwazaki-seo-blocks"),value:y,onChange:e=>a({bubbleMaxWidth:e}),min:30,max:100,help:(0,b.__)("100%で全幅、それ以下で幅を制限","kashiwazaki-seo-blocks")})]}),(0,p.jsx)(c.PanelColorSettings,{title:(0,b.__)("カラー設定","kashiwazaki-seo-blocks"),colorSettings:[{value:u,onChange:e=>a({bubbleColor:e}),label:(0,b.__)("吹き出しの背景色","kashiwazaki-seo-blocks")},{value:g,onChange:e=>a({textColor:e}),label:(0,b.__)("文字色","kashiwazaki-seo-blocks")},{value:m,onChange:e=>a({borderColor:e}),label:(0,b.__)("枠線色","kashiwazaki-seo-blocks")},{value:w,onChange:e=>a({nameLabelColor:e}),label:(0,b.__)("名前の文字色","kashiwazaki-seo-blocks")}]})]}),(0,p.jsx)("div",{...N,children:(0,p.jsxs)("div",{className:"ksb-speech-bubble-inner",children:[(0,p.jsxs)("div",{className:"ksb-speech-bubble-avatar",children:[d&&(0,p.jsx)("div",{className:"ksb-speech-bubble-title",style:O,children:d}),l?(0,p.jsx)("img",{src:l,alt:n||(0,b.__)("アバター","kashiwazaki-seo-blocks"),style:F}):U,n&&(0,p.jsx)("div",{className:"ksb-speech-bubble-name",style:D,children:n})]}),(0,p.jsx)("div",{className:"ksb-speech-bubble-bubble "+(_?"has-tail":""),style:{"--tail-color":u,"--tail-border":m,"--bubble-bg-color":u,"--bubble-border-color":m,"--border-width":`${v}px`,maxWidth:100===y?"none":`${y}%`},children:(0,p.jsx)("div",{style:I,children:(0,p.jsx)(c.RichText,{tagName:"div",className:"ksb-speech-bubble-content",value:o,onChange:e=>a({content:e}),placeholder:(0,b.__)("ここにメッセージを入力...","kashiwazaki-seo-blocks")})})})]})}),z&&(0,p.jsxs)(h.Modal,{title:(0,b.__)("アバタープリセットを保存","kashiwazaki-seo-blocks"),onRequestClose:()=>{S(!1),B("")},children:[(0,p.jsx)(h.TextControl,{label:(0,b.__)("プリセット名","kashiwazaki-seo-blocks"),value:$,onChange:B,placeholder:(0,b.__)("例: 管理人、ゲスト、専門家など","kashiwazaki-seo-blocks")}),l&&(0,p.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,p.jsx)("p",{style:{fontSize:"12px",color:"#666",marginBottom:"5px"},children:(0,b.__)("保存される画像:","kashiwazaki-seo-blocks")}),(0,p.jsx)("img",{src:l,alt:(0,b.__)("プレビュー","kashiwazaki-seo-blocks"),style:{maxWidth:"60px",height:"auto",borderRadius:"5px"}})]}),(0,p.jsx)("p",{style:{fontSize:"12px",color:"#666",marginBottom:"15px"},children:(0,b.__)("保存される設定: 画像、名前、肩書、プロフィールURL、位置、形状、サイズ、名前の色","kashiwazaki-seo-blocks")}),(0,p.jsxs)(h.Flex,{justify:"flex-end",children:[(0,p.jsx)(h.FlexItem,{children:(0,p.jsx)(h.Button,{isSecondary:!0,onClick:()=>{S(!1),B("")},children:(0,b.__)("キャンセル","kashiwazaki-seo-blocks")})}),(0,p.jsx)(h.FlexItem,{children:(0,p.jsx)(h.Button,{isPrimary:!0,onClick:()=>{if(!$.trim())return;const e={id:Date.now().toString(),name:$.trim(),avatarUrl:l,avatarId:t,avatarPosition:s,avatarShape:i,avatarSize:r,speakerName:n,speakerTitle:d,profileUrl:x,nameLabelColor:w},a=[...f,e];W(a),j(a),B(""),S(!1)},disabled:!$.trim(),children:(0,b.__)("保存","kashiwazaki-seo-blocks")})})]})]})]})},save:({attributes:e})=>{const{content:a,avatarUrl:o,avatarPosition:l,avatarShape:t,avatarSize:s,speakerName:i,speakerTitle:r,profileUrl:n,bubbleColor:d,textColor:h,borderColor:k,borderWidth:x,showTail:u,bubbleStyle:g,nameLabelColor:m,bubbleMaxWidth:v}=e,_=c.useBlockProps.save({className:`ksb-speech-bubble-wrapper ksb-avatar-${l} ksb-bubble-${g}`}),C={backgroundColor:d,color:h,border:`${x}px solid ${k}`,borderRadius:"rounded"===g?"20px":"10px",padding:"15px 20px",position:"relative"},w={width:`${s}px`,height:`${s}px`,borderRadius:"circle"===t?"50%":"rounded"===t?"10px":"0",objectFit:"cover"},y={color:m,fontSize:"14px",marginTop:"5px",fontWeight:"bold"},f={color:m,fontSize:"11px",marginBottom:"3px",opacity:.8},j=(0,p.jsx)("div",{style:{...w,backgroundColor:"#e0e0e0",display:"flex",alignItems:"center",justifyContent:"center",fontSize:s/3+"px",color:"#666"},children:(0,p.jsx)("span",{children:(0,b.__)("画像","kashiwazaki-seo-blocks")})}),z=o?(0,p.jsx)("img",{src:o,alt:i||(0,b.__)("アバター","kashiwazaki-seo-blocks"),style:w}):j,S=n?(0,p.jsx)("a",{href:n,className:"ksb-speech-bubble-avatar-link",target:"_blank",rel:"noopener noreferrer",children:z}):z,$=i&&(n?(0,p.jsx)("a",{href:n,className:"ksb-speech-bubble-name-link",style:{textDecoration:"none"},target:"_blank",rel:"noopener noreferrer",children:(0,p.jsx)("div",{className:"ksb-speech-bubble-name",style:y,children:i})}):(0,p.jsx)("div",{className:"ksb-speech-bubble-name",style:y,children:i}));return(0,p.jsx)("div",{..._,children:(0,p.jsxs)("div",{className:"ksb-speech-bubble-inner",children:[(0,p.jsxs)("div",{className:"ksb-speech-bubble-avatar",children:[r&&(0,p.jsx)("div",{className:"ksb-speech-bubble-title",style:f,children:r}),S,$]}),(0,p.jsx)("div",{className:"ksb-speech-bubble-bubble "+(u?"has-tail":""),style:{"--tail-color":d,"--tail-border":k,"--bubble-bg-color":d,"--bubble-border-color":k,"--border-width":`${x}px`,maxWidth:100===v?"none":`${v}%`},children:(0,p.jsx)("div",{style:C,children:(0,p.jsx)(c.RichText.Content,{tagName:"div",className:"ksb-speech-bubble-content",value:a})})})]})})}};[l,t,s,i,r,n].forEach(e=>{if(!e)return;const{name:a,settings:o}=e;(0,d.registerBlockType)(a,o)})}},o={};function l(e){var t=o[e];if(void 0!==t)return t.exports;var s=o[e]={exports:{}};return a[e](s,s.exports,l),s.exports}l.m=a,e=[],l.O=(a,o,t,s)=>{if(!o){var i=1/0;for(b=0;b<e.length;b++){for(var[o,t,s]=e[b],r=!0,n=0;n<o.length;n++)(!1&s||i>=s)&&Object.keys(l.O).every(e=>l.O[e](o[n]))?o.splice(n--,1):(r=!1,s<i&&(i=s));if(r){e.splice(b--,1);var d=t();void 0!==d&&(a=d)}}return a}s=s||0;for(var b=e.length;b>0&&e[b-1][2]>s;b--)e[b]=e[b-1];e[b]=[o,t,s]},l.d=(e,a)=>{for(var o in a)l.o(a,o)&&!l.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:a[o]})},l.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a),l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={57:0,350:0};l.O.j=a=>0===e[a];var a=(a,o)=>{var t,s,[i,r,n]=o,d=0;if(i.some(a=>0!==e[a])){for(t in r)l.o(r,t)&&(l.m[t]=r[t]);if(n)var b=n(l)}for(a&&a(o);d<i.length;d++)s=i[d],l.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return l.O(b)},o=globalThis.webpackChunkkashiwazaki_seo_blocks=globalThis.webpackChunkkashiwazaki_seo_blocks||[];o.forEach(a.bind(null,0)),o.push=a.bind(null,o.push.bind(o))})();var t=l.O(void 0,[350],()=>l(146));t=l.O(t)})();